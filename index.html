<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HOOPS.ID</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <header>
      <h1>HOOPS.ID</h1>
      <div class="tag">Gratis tanya ketersediaan via WhatsApp</div>
    </header>

    <div class="layout">
      <main>
        <section>
          <div class="grid" id="products"></div>
        </section>

        <section class="section">
          <h2>Cara pakai singkat</h2>
          <p class="muted">
            Tambahkan produk ke keranjang lalu klik "Checkout via WhatsApp" untuk mengirim pesanan ke
            <strong>0812-8067-0330</strong>.
          </p>
        </section>
      </main>

      <aside>
        <div class="cart">
          <h2>Keranjang Anda</h2>

          <div class="cart-list" id="cart-list">
            <div class="muted">Keranjang kosong — tambahkan produk.</div>
          </div>

          <div class="section">
            <label>Pilih Metode Pembayaran</label>
            <div class="radio-row">
              <label><input type="radio" name="pay" value="COD" checked> COD</label>
              <label><input type="radio" name="pay" value="GoPay"> GoPay</label>
              <label><input type="radio" name="pay" value="Transfer Bank"> Transfer Bank</label>
            </div>
            <div class="note">Ini hanya demo.</div>
          </div>

          <div class="section">
            <div class="total" id="cart-total">Total: Rp 0</div>

            <div style="margin-top: 10px; display: flex; gap: 8px">
              <button class="btn btn-primary" id="checkout">Checkout via WhatsApp</button>
              <button class="btn btn-ghost" id="clear-cart">Kosongkan</button>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- ==================== JAVASCRIPT BARU & SUDAH RAPIH ===================== -->

  <script>
    // ==================== KONFIGURASI ====================
    const WA_NUMBER = "6281280670330";

    const PRODUCTS = [
      { id: 1, name: "mb 04", price: 2599999, img: "sabrina 3.jpg" },
      { id: 2, name: "giannis", price: 1299000, img: "giannis.jpg" },
      { id: 3, name: "ja morant 3", price: 2679000, img: "ja 3.jpg" },
      { id: 4, name: "kobe", price: 2999000, img: "kobe.jpg" },
      { id: 5, name: "harden", price: 2599000, img: "harden.jpg" },

      { id: 6, name: "tas jordan", price: 599999, img: "tas jordan.jpg" },
      { id: 7, name: "bola biru", price: 399000, img: "bola biru.jpg" },
      { id: 8, name: "jersey lakers", price: 679000, img: "jersey lakers.jpg" },
      { id: 9, name: "jersey gsw", price: 299000, img: "jersey gsw.jpg" },

      { id: 10, name: "devin booker", price: 2599000, img: "dbook.jpg" },
      { id: 11, name: "topi", price: 299000, img: "topi.jpg" },
      { id: 12, name: "kaos kaki", price: 99000, img: "kaos kaki.jpg" },
      { id: 13, name: "botol", price: 299000, img: "botol.jpg" },
      { id: 14, name: "backpack", price: 999000, img: "backpack.jpg" },
      { id: 15, name: "bola basket", price: 599000, img: "bola basket.jpg" },
      { id: 16, name: "headband", price: 259000, img: "headband.jpg" },
    ];

    // ==================== UTIL ====================
    const toRupiah = (v) => "Rp " + v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");

    // ==================== RENDER PRODUK ====================
    const productsEl = document.getElementById("products");

    PRODUCTS.forEach((p) => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <h3>${p.name}</h3>
        <div class="price">${toRupiah(p.price)}</div>
        <div class="row">
          <button class="btn small btn-primary add-cart" data-id="${p.id}">Tambah ke Keranjang</button>
          <button class="btn small btn-ghost ask" data-id="${p.id}">Tanyakan Ketersediaan</button>
        </div>
      `;
      productsEl.appendChild(card);
    });

    // ==================== STATE KERANJANG ====================
    let cart = {};

    const cartListEl = document.getElementById("cart-list");
    const cartTotalEl = document.getElementById("cart-total");

    function renderCart() {
      cartListEl.innerHTML = "";

      const ids = Object.keys(cart);
      if (ids.length === 0) {
        cartListEl.innerHTML = '<div class="muted">Keranjang kosong — tambahkan produk.</div>';
        cartTotalEl.textContent = "Total: Rp 0";
        return;
      }

      let total = 0;

      ids.forEach((id) => {
        const item = cart[id];
        const p = PRODUCTS.find((x) => x.id == id);

        total += p.price * item.qty;

        const row = document.createElement("div");
        row.className = "cart-item";
        row.innerHTML = `
          <img src="${p.img}">
          <div style="flex:1;">
            <div style="font-weight:700">${p.name}</div>
            <div class="muted">${toRupiah(p.price)} x ${item.qty}</div>
          </div>

          <div class="qty">
            <button class="btn small btn-ghost dec" data-id="${id}">-</button>
            <div>${item.qty}</div>
            <button class="btn small btn-ghost inc" data-id="${id}">+</button>
            <button class="btn small btn-ghost rm" data-id="${id}">hapus</button>
          </div>
        `;

        cartListEl.appendChild(row);
      });

      cartTotalEl.textContent = "Total: " + toRupiah(total);

      // tombol qty
      cartListEl.querySelectorAll(".inc").forEach((b) =>
        b.addEventListener("click", () => {
          cart[b.dataset.id].qty++;
          renderCart();
        })
      );

      cartListEl.querySelectorAll(".dec").forEach((b) =>
        b.addEventListener("click", () => {
          const id = b.dataset.id;
          cart[id].qty--;
          if (cart[id].qty <= 0) delete cart[id];
          renderCart();
        })
      );

      cartListEl.querySelectorAll(".rm").forEach((b) =>
        b.addEventListener("click", () => {
          delete cart[b.dataset.id];
          renderCart();
        })
      );
    }

    // ==================== EVENT PRODUK ====================
    document.querySelectorAll(".add-cart").forEach((btn) =>
      btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        cart[id] = cart[id] || { qty: 0 };
        cart[id].qty++;
        renderCart();
      })
    );

    document.querySelectorAll(".ask").forEach((btn) =>
      btn.addEventListener("click", () => {
        const p = PRODUCTS.find((x) => x.id == btn.dataset.id);
        const msg = `Halo, apakah *${p.name}* masih tersedia?`;
        window.open(`https://wa.me/${WA_NUMBER}?text=` + encodeURIComponent(msg), "_blank");
      })
    );

    // ==================== TOMBOL KOSONGKAN ====================
    document.getElementById("clear-cart").addEventListener("click", () => {
      cart = {};
      renderCart();
    });



    document.getElementById("checkout").addEventListener("click", () => {
  const ids = Object.keys(cart);

  if (ids.length === 0) {
    alert("Keranjang kosong.");
    return;
  }

  const pay = document.querySelector("input[name=pay]:checked").value;

  let total = 0;
  let lines = [];

  ids.forEach((id) => {
    const p = PRODUCTS.find((x) => x.id == id);
    const qty = cart[id].qty;

    lines.push(`${p.name} x ${qty} = ${toRupiah(p.price * qty)}`);
    total += p.price * qty;
  });

  const message =
    `Halo, saya ingin memesan dari *HOOPS.ID*:\n\n` +
    lines.join("\n") +
    `\n\nTotal: ${toRupiah(total)}` +
    `\nMetode pembayaran: ${pay}` +
    `\n\nMohon konfirmasi ketersediaan.`

  window.open(
    `https://wa.me/${WA_NUMBER}?text=` + encodeURIComponent(message),
    "_blank"
  );
});

renderCart();


  </script>
</body>
</html>
